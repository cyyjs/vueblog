(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{73:function(t,n,s){"use strict";s.r(n);var a=s(0),o=Object(a.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"content"},[s("p",[s("img",{attrs:{src:"http://ow5l7f56h.bkt.clouddn.com/d71fa830-2da5-11e8-908e-8d20789a9043",alt:"图片"}}),t._v("\nDockerfile 是用于构建 Docker 镜像的脚本文件。")]),s("pre",{pre:!0,attrs:{class:"language-docker"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("# 基础镜像")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" node"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("8.9.4\n"),s("span",{attrs:{class:"token comment"}},[t._v("# 维护者信息，旧版本写法不一样")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("LABEL")]),t._v(" maintainer="),s("span",{attrs:{class:"token string"}},[t._v('"cyy"')]),t._v("\n"),s("span",{attrs:{class:"token comment"}},[t._v("# 工作目录")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("WORKDIR")]),t._v(" /api\n"),s("span",{attrs:{class:"token comment"}},[t._v("# 复制本地文件到容器中")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("COPY")]),t._v(" ./package.json /hk"),s("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v("ad"),s("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v("api/\n"),s("span",{attrs:{class:"token comment"}},[t._v("# 在终端执行命令")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("RUN")]),t._v(" npm install "),s("span",{attrs:{class:"token punctuation"}},[t._v("-")]),s("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v("production "),s("span",{attrs:{class:"token punctuation"}},[t._v("-")]),s("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v("registry=https"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//registry.npm.taobao.org\n"),s("span",{attrs:{class:"token keyword"}},[t._v("RUN")]),t._v(" \\\n    rm /etc/localtime && \\\n    ln "),s("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v("s /usr/share/zoneinfo/Asia/Shanghai /etc/localtime\n"),s("span",{attrs:{class:"token comment"}},[t._v("# 容器暴露端口号")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("EXPOSE")]),t._v(" 6080\n"),s("span",{attrs:{class:"token comment"}},[t._v("# 环境变量")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("ENV")]),t._v(" NODE_ENV="),s("span",{attrs:{class:"token string"}},[t._v('"production"')]),t._v(" \\\n    MONGO_HOST= \\\n    MONGO_OPTION= \\\n    MONGO_PORT= \\\n    MONGO_USER=\\\n    MONGO_PASSWD=\\\n    REDIS_HOST= \\\n    REDIS_PASSWD=\\\n    REDIS_PORT=\\\n    MEMCACHE_HOST=\\\n    MEMCACHE_USERNAME=\\\n    MEMCACHE_PASSWORD=\\\n    MEMCACHE_PORT=\\\n    MYSQL_HOST="),s("span",{attrs:{class:"token string"}},[t._v("''")]),t._v(" \\\n    MYSQL_PORT=\\\n    MYSQL_USER=\\\n    MYSQL_PASSWD=\\\n    PORT=6080\n"),s("span",{attrs:{class:"token comment"}},[t._v("# 类似COPY")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("ADD")]),t._v(" . /api\n"),s("span",{attrs:{class:"token comment"}},[t._v("# 容器执行的命令，每个容器只能执行一条CMD命令")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("CMD")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{attrs:{class:"token string"}},[t._v('"node"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"www/production.js"')]),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])])}],!1,null,null,null);n.default=o.exports}}]);