(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{99:function(t,s,n){"use strict";n.r(s);var a=n(0),e=Object(a.a)({},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"content"},[t._m(0),t._m(1),n("p",[t._v("1、首先在服务器生成"),n("router-link",{attrs:{to:"../other/Ja5aO9RFlMdvjYBE.html"}},[t._v("ssh key")]),t._v("\n2、添加"),n("code",[t._v("ssh key")]),t._v("到 GitHub 账户中")],1),t._m(2),t._m(3),t._m(4),t._m(5),t._m(6),t._m(7),t._m(8)])},[function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("使用第三方 Git 仓库，实现代码的自动部署\nGitHub 提供了 Webhooks 的功能，我们通过相应的配置就可以实现在代码提交到 GitHub 后自动部署我们的项目")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"在-github-添加部署服务器的-ssh-key"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#在-github-添加部署服务器的-ssh-key","aria-hidden":"true"}},[this._v("#")]),this._v(" 在 GitHub 添加部署服务器的 ssh key")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("选择"),s("code",[this._v("setting")]),this._v(" -> "),s("code",[this._v("SSH and GPG keys")]),this._v(" -> "),s("code",[this._v("New SSH Key")]),this._v(" 添加")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"配置-webhooks"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置-webhooks","aria-hidden":"true"}},[this._v("#")]),this._v(" 配置 Webhooks")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("打开需要配置"),s("code",[this._v("Webhooks")]),this._v("的项目，点击"),s("code",[this._v("Settings")]),this._v("，选择"),s("code",[this._v("Webhooks")]),s("img",{attrs:{src:"https://ws2.sinaimg.cn/large/006tNbRwgy1fgagteiy5ej31ji120dmi.jpg",alt:"Webhooks 设置"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("设置触发事件后请求的地址及方法，并选择触发事件的类型，此处选择为"),s("code",[this._v("push")]),this._v(",当我们提交代码的时候触发；设置完成后，点击添加即可。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"服务器编辑接受处理代码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#服务器编辑接受处理代码","aria-hidden":"true"}},[this._v("#")]),this._v(" 服务器编辑接受处理代码")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("以"),s("code",[this._v("nodejs")]),this._v(" 的 "),s("code",[this._v("express")]),this._v("为例：")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" shell "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("require")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'shelljs'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// shell npm 包工具")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" setting "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("require")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'../setting'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" blogPath "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" setting"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("blog"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path\nmodule"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("function")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" body "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" req"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body\n    console"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("log")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("body"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// git 推送的数据")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token operator"}},[t._v("!")]),t._v("shell"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("which")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'git'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{attrs:{class:"token comment"}},[t._v("// 判断是否存在git命令")]),t._v("\n        shell"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("echo")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'Sorry, this script requires git'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        shell"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("exit")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token number"}},[t._v("1")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" cd "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" shell"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("cd")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("blogPath"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token operator"}},[t._v("!")]),t._v("cd"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("code"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{attrs:{class:"token comment"}},[t._v("// 执行git代码拉取操作")]),t._v("\n        "),n("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("shell"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("exec")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'git pull origin master'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("code "),n("span",{attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("0")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            shell"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("echo")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'Error: Git pull error!'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            shell"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("exit")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token number"}},[t._v("1")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    res"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("end")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])}],!1,null,null,null);s.default=e.exports}}]);